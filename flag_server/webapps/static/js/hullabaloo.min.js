!function(o,t){"function"==typeof define&&define.amd?define(["buoy"],t(o)):"object"==typeof exports?module.exports=t(require("buoy")):o.hullabaloo=t(o,o.buoy)}("undefined"!=typeof global?global:this.window||this.global,function(o){var t;return(t=function(){this.hullabaloo={},this.hullabaloos=[],this.success=!1,this.options={ele:"body",offset:{from:"top",amount:20},align:"right",width:250,delay:5e3,allow_dismiss:!0,stackup_spacing:10,text:"Произошла неизвестная ошибка. Попробуйте перезагрузить страницу и повторить операцию.",icon:{success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-life-ring",danger:"fa fa-exclamation-circle",light:"fa fa-sun",dark:"fa fa-moon"},status:"danger",alertClass:"",fnStart:!1,fnEnd:!1,fnEndHide:!1}}).prototype.send=function(o,t){"function"==typeof this.options.fnStart&&this.options.fnStart();var s,e=this,l=1,a=+this.hullabaloos.length-1,i=this.generate(o,t);if(this.hullabaloos.length)for(;a>=0&&l;)this.hullabaloos[a].text==i.text&&this.hullabaloos[a].status==i.status&&(s=this.hullabaloos[a],l=0,i.elem.css(this.options.offset.from,parseInt(s.elem.css(this.options.offset.from))+4),i.elem.css(this.options.align,parseInt(s.elem.css(this.options.align))+4)),a--;"object"==typeof s?(clearTimeout(s.timer),s.timer=setTimeout(function(){e.closed(s)},this.options.delay),i.parent=s,s.hullabalooGroup.push(i)):(i.position=parseInt(i.elem.css(this.options.offset.from)),i.timer=setTimeout(function(){e.closed(i)},this.options.delay),this.hullabaloos.push(i)),i.elem.fadeIn(),"function"==typeof this.options.fnEnd&&this.options.fnEnd()},t.prototype.closed=function(o){var t,s,e,l;if("parent"in o&&(o=o.parent),null!==this.hullabaloos){if(-1==(t=$.inArray(o,this.hullabaloos)))return;if(o.hullabalooGroup&&o.hullabalooGroup.length)for(s=0;s<o.hullabalooGroup.length;s++)$(o.hullabalooGroup[s].elem).remove();if($(this.hullabaloos[t].elem).fadeOut("slow",function(){this.remove()}),-1!==t){if(l=t+1,this.hullabaloos.length>1&&l<this.hullabaloos.length)for(e=this.hullabaloos[l].position-this.hullabaloos[t].position,s=t;s<this.hullabaloos.length;s++)this.animate(this.hullabaloos[s],parseInt(this.hullabaloos[s].position)-e),this.hullabaloos[s].position=parseInt(this.hullabaloos[s].position)-e;this.hullabaloos.splice(t,1),"function"==typeof this.options.fnEndHide&&this.options.fnEndHide()}}},t.prototype.animate=function(o,t){var s,e,l,a=this,i=0;e=parseInt(o.elem.css(a.options.offset.from)),i=o.hullabalooGroup.length,s=setInterval(function(){if(e==t)clearInterval(s);else if(e--,o.elem.css(a.options.offset.from,e),i)for(l=0;l<i;l++)o.hullabalooGroup[l].elem.css(a.options.offset.from,e+5)},2)},t.prototype.generate=function(o,t){var s,e,l,a={icon:"",status:t||this.options.status,text:o||this.options.text,elem:$("<div>"),hullabalooGroup:[]};switch(self=this,s=this.options,a.elem.attr("class","hullabaloo alert "+s.alertClass),a.elem.addClass("alert-"+a.status),s.allow_dismiss&&(a.elem.addClass("alert-dismissible"),a.elem.append('<button class="close" type="button" id="hullabalooClose" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),$("#hullabalooClose",$(a.elem)).bind("click",function(){self.closed(a)})),a.status){case"success":a.icon=s.icon.success;break;case"info":a.icon=s.icon.info;break;case"danger":a.icon=s.icon.danger;break;case"light":a.icon=s.icon.light;break;case"dark":a.icon=s.icon.dark;break;default:a.icon=s.icon.warning}switch(a.elem.append('<i class="'+a.icon+'"></i> '+a.text),e=s.offset.amount,$(".hullabaloo").each(function(){return e=Math.max(e,parseInt($(this).css(s.offset.from))+$(this).outerHeight()+s.stackup_spacing)}),(l={position:"body"===s.ele?"fixed":"absolute",margin:0,"z-index":"9999",display:"none"})[s.offset.from]=e+"px",a.elem.css(l),"auto"!==s.width&&a.elem.css("width",s.width+"px"),$(s.ele).append(a.elem),s.align){case"center":a.elem.css({left:"50%","margin-left":"-"+a.elem.outerWidth()/2+"px"});break;case"left":a.elem.css("left","20px");break;default:a.elem.css("right","20px")}return a},t});